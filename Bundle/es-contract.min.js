import i from"https://unpkg.com/typeofanything@1.4.2/typeofany.module.js";function $({IS:t,tryJSON:r,contractsPrefix:n}={}){return n=n&&`${n}
`||"",{EN:{unknownOrNa:"unknown or n/a",unknown:"unknown",nameOkExpected:"The contract to add needs a name (String)",isMethodExpected:"The contract to add needs a method (Function)",expectedOkExpected:"The contract to add needs an expected value method (String|Function)",addContracts_Contract_Expected:"the parameter for [addContracts] should be at least { [contractName]: { method: Function, expected: String|Function } }",addContract_Contract_Expected:`addContract parameters should at least be {name, method, expected}
(when method is a named function, the name was derived from that)`,report_sorry:(o,e)=>`\u2718 ${n}Contract violation for contract [${o}], input ${e}`,report_forValue:o=>`${o}`,report_Expected:o=>`
${o}`,report_defaultValue:(o,e)=>o?"":`
Using the contract default value (${t(e,Function)?e.toString():t(e,String)?`"${e}"`:r(e)}) instead`},NL:{unknownOrNa:"onbekend of nvt",unknown:"onbekend",nameOkExpected:"Het contract moet een naam hebben (eigenschap name: String)",isMethodExpected:"Het contract moet kunnen worden uitgevoerd (eigenschap method: Function)",expectedOkExpected:"Het contract moet aangeven wat er wordt verwacht (eigenschap expected: String|Function)",addContracts_Contract_Expected:"De parameter for [addContracts] moet tenminste { [contractName]: { method: Function, expected: String|Function } } zijn",addContract_Contract_Expected:`De invoer vooor [addContract] moet tenminste {name, method, expected} zijn
(wanneer de eigenschap [method] een functie met naam was wordt [name] daarvan afgeleid)`,report_sorry:(o,e)=>`\u2718 ${n} Contractbreuk voor contract [${o}], input ${e}`,report_forValue:o=>`${o}`,report_Expected:o=>`
${o}`,report_defaultValue:(o,e)=>o?"":`
In plaats daarvan wordt de voor dit contract toegekende standaardwaarde (${t(e,Function)?e.toString():t(e,String)?`"${e}"`:r(e)}) gebruikt`}}}var s,L=D,b=T(),E=B();function D(t){u(t);let{reporter:r,logViolations:n,alwaysThrow:o,language:e,contractsPrefix:a}=t;s=$({IS:i,tryJSON:y,contractsPrefix:a})[e];let c={addContract:C,addContracts:g};return j(c),Object.freeze({contracts:c,IS:i,tryJSON:y});function u(d){d.reporter=d.reporter||_,d.logViolations=d.logViolations||!1,d.alwaysThrow=d.alwaysThrow||!1,d.language=d.language||"EN"}function g(d){if(!c.addContracts_Contract(d))return;let p=Object.entries(d);for(let[l,m]of p)C({...m,paramsChecked:!0,name:l})}function C(d=b.addContract){let{name:p,method:l,expected:m,defaultValue:h,customMessageFn:f,reportFn:F,shouldThrow:w,reportViolationsByDefault:V,paramsChecked:x,enumerable:k}=d;p=p||l?.name;let S=c.addContract_Contract||E.checkSingleContractParameters;if(!x&&!S({name:p,method:l,expected:m}))return;let N=M({name:p,method:l,expected:m,defaultValue:h,reporter:r,reportFn:F,customMessageFn:f,reportViolationsByDefault:V,logViolations:n,shouldThrow:w,alwaysThrow:o});return Object.defineProperty(c,p,{value:N,enumerable:k})}}function M(t=b.createContract){let{name:r,method:n,expected:o,defaultValue:e,customMessageFn:a,reportFn:c,reporter:u,logViolations:g,shouldThrow:C,reportViolationsByDefault:d,alwaysThrow:p}=t;return function(l,...m){let h=n(l,...m),f=i(m[0],Object)&&{...m[0],value:l}||{value:l};if(c=c??u??_,i(a,Function)&&a(f),O(h)){let F=i(o,Function)?o(f):o,w=e||f.defaultValue;h=O(w)?h:w;let[V,x]=[f.reportViolation??d,f.shouldThrow??C];if(V||x||g){let k=v({inputValue:l,defaultValue:h,shouldBe:F,fnName:r||n.name});if(x||p)throw new TypeError(k);u(k)}}return h}}function T(){let[t,r,n,o,e,a,c]=[...Array(7)];return{get reportViolations(){return{inputValue:c,defaultValue:o,shouldBe:s.unknowOrNa,fnName:s.unknown}},get createContract(){return{name:t,method:r,expected:n,defaultValue:o,customMessageFn:e,reportFn:a,reporter:_,logViolations:!1,shouldThrow:!1,alwaysThrow:!1,reportViolationsByDefault:!1}},get addContract(){return{name:t,method:r,expected:n,defaultValue:o,customMessageFn:e,reportFn:a,reporter:_,shouldThrow:!1,reportViolationsByDefault:!1,paramsChecked:!1,enumerable}}}}function B(){let t=e=>i(e,String)&&e.trim().length,r=e=>i(e,String)&&e.length||i(e,Function),n=e=>i(e,Function);return{nameOk:t,expectedOk:r,isMethod:n,checkSingleContractParameters:({name:e,method:a,expected:c}={})=>e&&t(e)&&a&&n(a)&&c&&r(c)}}function j(t){let{nameOk:r,expectedOk:n,isMethod:o,checkSingleContractParameters:e}=E;t.addContract({method:r,expected:s.nameOkExpected,reportViolationsByDefault:!0,enumerable:!1}),t.addContract({method:o,expected:s.isMethodExpected,reportViolationsByDefault:!0}),t.addContract({method:n,expected:s.expectedOkExpected,reportViolationsByDefault:!0}),t.addContract({name:"addContracts_Contract",method:a=>i(a,Object)&&[...Object.entries(a)].filter(([,u])=>u.method&&o(u.method)&&u.expected&&n(u.expected)).length>0?a:void 0,expected:s.addContracts_Contract_Expected,reportViolationsByDefault:!0}),t.addContract({name:"addContract_Contract",method:e,expected:s.addContract_Contract_Expected,reportViolationsByDefault:!0})}function v(t=b.reportViolations){let{inputValue:r,defaultValue:n,shouldBe:o,fnName:e}=t,a=s.report_sorry(e,P(r)),c=s.report_forValue(a),u=s.report_Expected(o),g=s.report_defaultValue(O(n),n);return z(`${c}${u}${g}`)}function z(t,r=3){return t.replace(/\n/g,`
${" ".repeat(r)}`)}function O(t){return i(t,void 0,null)}function y(t){return R(()=>{let n=JSON.stringify(t);return/Infinity|NaN/.test(n)?n.replace(/"/g,""):n},t)}function P(t){let r=n=>i(n,String)?`"${n}"`:i(n,Object)?y(n):String(n);return i(t,String)?`"${t}"`:i(t,Object)?y(t):/Array\(/.test(t?.constructor.toString())?`[${[...t].map(r)}]`:String(t)}function _(t){console.info(t)}function R(t,r){try{return t()}catch(n){return console.error({isOk:n.name===expected,message:n.message,type:n.name}),r}}export{L as default};
